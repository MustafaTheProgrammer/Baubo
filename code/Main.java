import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import javax.swing.JFrame;
import java.util.ArrayList;

public class Main extends JFrame implements KeyListener{
    public static int width = 42;
    public static int height = 30;
    public static String[] pixels = new String[width * height];
    public static String white = "\u001B[100m  ";
    public static String black = "\u001B[47m  ";
    public static String grey = "\u001B[107m  ";
    public static String blue = "\u001B[46m  ";
    public static String lightblue = "\u001B[44m  ";
    public static String red = "\u001B[101m  ";
    public static String green = "\u001B[102m  ";
    public static String yellow = "\u001B[103m  ";
    public static boolean rightKey;
    public static boolean leftKey;
    public static boolean upKey;
    public static boolean downKey;
    public static boolean spaceKey;
    public static String gameState = "title";
    public static int level = 1;
    public static int introtimer;

    public static float playerx = 7;
    public static float camx = 0;
    public static float playery = -23;
    public static float playerxv;
    public static float playeryv;
    public static int playerdir = 1;
    public static int playerfalling;
    public static int playeriframes;
    public static int playerhp = 1;
    public static int playerdeathtimer;
    public static int playerwintimer;
    public static int fireballtimer;
    public static int playerwalktimer;

    public static float bossx = 2;
    public static float bossy = -8;
    public static float bossyv;
    public static int bosstimer = 0;
    public static int bossdeathtimer;

    public static float buttonx;
    public static float buttony;

    //used for scene in end
    public static float projx;
    public static float projy;

    public static float fireballx;
    public static float fireballxv;
    public static float firebally;
    public static boolean fireballactive = false;

    public static char[][] level1 = {{'0', '0', '0', '0', '0', 'o', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', 'o', '0', '0', '0', '0', '0', '0', '0', 'o', '0', '0', '0', 'o', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', 'o', '0', '0', '0', '0', '0', '0', '0', 'o', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', 'o', '0', '0', '0', '0', '0', '0', 'o', '0', '0', '0', 'o', '0', '0', '0', '0', 'o', '0', '0', '0', 'o', '0', '0', 'o', '0', '0', '0', '0', '0', '0', '0', '0', '0', 'o', '0', '0', '0', 'o', '0', '0', '0', '0', '0', '0', 'o', '0', '0', 'o', '0', '0', '0', '0', '0', 'o', '0', '0', 'o', '0', '0', '0', '0', '0', 'o', '0', 'o', '0', '0', '0', 'o', '0', '0', '0', '0', 'o', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', 'o', '0', '0', '0', '0', '0', '0', '0', 'o', '0', '0', '0', '0', '0', '0', 'o', '0', '0', '0', 'o', '0', '0', '0', '0', 'o'},//this row will be disregarded
                                     {'0', '0', '0', 'o', '0', '0', '0', '0', '0', 'o', '0', '0', '0', '0', 'o', '0', 'o', '0', '0', '0', '0', 'o', '0', '0', 'o', '0', '0', '0', 'o', '0', '0', '0', '0', '0', 'o', '0', 'o', '0', 'o', '0', '0', '0', '0', '0', 'o', '0', 'o', '0', '0', '0', '0', '0', '0', 'o', '0', '0', '0', 'o', '0', '0', '0', 'o', '0', '0', '0', 'o', '0', '0', '0', 'o', '0', '0', '0', 'o', 'o', '0', '0', '0', '0', 'o', '0', 'o', '0', '0', '0', '0', '0', 'o', '0', 'o', '0', '0', '0', '0', '0', 'o', '0', '0', '0', '0', '0', '0', '0', '0', '0', 'o', '0', '0', 'o', '0', 'o', '0', '0', '0', 'o', '0', '0', 'o', '0', '0', 'o', '0', '0', '0', '0', '0', 'o', '0', '0', '0', '0', 'o', '0', '0', '0', '0', '0', 'o', '0', '0', '0', '0', '0', 'o', '0', '0', '0', '0', '0', '0', '0', 'o', '0', '0', '0', '0', '0', '0', '0', 'o', '0', '0', '0', 'o', '0', '0', '0', '0', 'o', '0', '0'},
                                     {'0', '0', 'o', '0', '0', '0', '0', 'o', '0', '0', '0', 'o', '0', 'o', '0', '0', '0', '0', '0', '0', 'o', '0', '0', '0', '0', '0', 'o', '0', '0', '0', '0', 'o', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', 'o', '0', '0', '0', '0', '0', 'o', '0', '0', 'o', '0', '0', '0', 'o', '0', '0', '0', 'o', '0', '0', '0', 'o', '0', '0', '0', '0', '0', '0', '0', 'o', '0', '0', '0', '0', '0', '0', 'o', '0', '0', '0', '0', '0', '0', 'o', '0', '0', '0', '0', '0', '0', 'o', '0', '0', '0', 'b', '0', '0', 'o', '0', '0', 'o', '0', '0', '0', '0', '0', '0', 'a', '1', '1', 'o', '0', '0', '0', 'b', '0', 'b', 'o', '0', '0', 'o', '0', '0', '0', '0', '0', '0', 'b', 'o', '0', '0', '0', '0', 'o', '0', '0', '0', '0', 'o', '0', '0', '0', '0', '0', '0', '0', 'b', 'o', '0', '0', '0', 'o', '0', '0', 'o', '0', 'o', '0', '0', 'o', '0', '0', '0', '0', 'o', '0', '0', 'o', '0'},
                                     {'o', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '1', '1', '0', '0', '0', '0', 'o', '0', 'o', '0', '0', '0', 'o', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', 'o', '0', '0', '0', '0', 'o', '0', '1', '1', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '1', '0', 'a', '0', 'a', '1', '0', '0', 'a', '0', '0', '0', '0', 'p', '0', '0', '0', '0', 'o', '0', '0', 'b', '0', '0', '0', 'o', '0', '0', '0', '1', '1', '1', '1', '1', '0', 'o', '0', '0', 'b', '0', '0', 'p', '1', '1', '1', '1', '1', '0', 'a', '0', '1', '1', '1', '1', '1', '0', 'a', 'b', '0', '1', '0', '0', '1', '1', '1', '1', '0', '0', '0', '1', '0', 'a', '0', '1', '1', '0', '0', '0', '0', 'a', '0', '0', '1', '1', '1', '0', '0', '0', 'b', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0'},
                                     {'0', '0', '0', '0', '1', '0', '0', '1', '0', '0', '1', '1', '1', '1', '1', '1', '1', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '1', '1', '0', '0', '0', '0', '1', '1', '1', '0', '0', '1', '1', '1', '0', '0', '1', '1', '0', '0', '0', '0', 'p', '0', '1', '0', 'a', '1', '0', '0', 'a', '0', 'o', '0', '0', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '0', '0', '1', '1', '1', '1', '1', '0', 'b', '0', '1', '1', '1', '1', '0', 'b', '0', 'b', '0', '1', '1', '1', '1', '1', '1', '0', '0', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '0', '0', '1', '1', '1', '1', '0', 'o', '1', '1', '1', '1', '1', '1', '1', '0', '0', 'o', '1', '1', '1', '1', '1', '1', '1', '0', 'o', '1', '1', '1', '0', '0', '0', '0', 'a', '0', '1', '0', '0', '0', '0', '0', '0', '0', '0', '0'},
                                     {'1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '0', '0', '1', '1', '1', '1', '0', '0', '1', '1', '1', '1', '0', '0', '1', '1', '1', '1', '1', '0', '0', '1', '1', '1', '0', '0', '1', '1', '0', '0', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '0', '0', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '0', '0', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '0', '0', '1', '1', '1', '1', '0', '0', '1', '1', '1', '1', '1', '1', '1', '0', '0', '0', '1', '1', '1', '1', '1', '1', '1', '0', '0', '1', '1', '1', '0', '0', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1'}};

    public static char[][] level2 = {{'0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0'},//disregard here also
                                     {'0', '0', '0', '0', 'o', '0', '0', '0', '0', '0', '0', '0', 'o', '0', '0', '0', 'o', '0', '0', '0', 'o', '0', '0', '0', '0', '0', 'o', '0', 'o', '0', '0', '0', 'o', '0', '0', '0', 'o', '0', '0', '0', '0', 'o', '0', '0', '0', '0', 'o', '0', '0', '0', '0', '0', '0', '0', 'o', '0', '0', 'o', '0', '0', '0', '0', '0', 'o', '0', '0', '0', '0', '0', '0', 'o', '0', '0', '0', '0', '0', 'o', '0', '0', '0', '0', '0', '0', 'o', '0', '0', '0', '0', '0', 'o', '0', '0', '0', '0', '0', '0', '0', '0', 'o', '0', '0', 'o', '0', '0', '0', '0', 'o', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', 'o', '0', '0', '0', 'o', '0', '0', 'o', '0', '0', '0', '0', '0', '0', '0', '0', 'o', '0', '0', '0', 'o', '0', '0', 'o', '0', '0', 'o', '0', '0', '0', '0', '0', 'o', '0', '0', '0', '0', 'o', '0', '0', 'o'},
                                     {'0', 'o', '0', '0', '0', 'o', '0', '0', '0', '0', 'o', '0', '0', '0', '0', '0', 'o', '0', 'o', '0', '0', '0', 'o', 'c', '0', 'o', '0', '0', '0', '0', 'o', '0', '0', '0', '0', 'o', '0', '0', '0', '0', '0', '0', '0', '0', 'o', '0', '0', '0', '0', '0', '0', 'o', '0', '0', '0', '0', 'o', '0', '0', 'o', '0', '0', 'o', '0', '0', 'o', '0', '0', 'o', '0', '0', '0', 'o', '0', '0', '0', '0', '0', '0', 'o', '0', 'o', '0', '0', '0', 'o', '0', '0', '0', '0', '0', 'o', '0', '0', 'o', '0', '0', 'o', '0', 'o', '0', '0', '0', 'o', 'd', '0', '2', '3', '4', '0', '0', 'o', '0', '0', '0', 'o', '0', '0', 'o', '0', '0', '0', '0', 'o', '0', '0', '0', '0', 'o', '0', '0', '0', '0', '0', 'o', '0', '0', '0', 'o', '0', '0', '0', '0', '0', '0', '0', '0', '0', 'o', '0', '0', '0', 'o', '0', '0', '0', 'o', '0'},
                                     {'0', '0', '0', 'o', '0', '0', '0', 'o', '0', 'o', '0', '0', '0', '0', 'o', '0', '0', '0', '0', '2', '3', '3', '3', '3', '4', '0', '0', '0', '0', 'p', '0', '0', '0', 'o', '0', '0', '0', 'c', 'o', '0', '0', 'c', 'o', '0', '0', '0', '0', '0', '0', 'o', '0', '0', '0', '0', 'o', '0', '0', '0', '0', '0', 'o', '0', '0', '0', '2', '3', '4', '0', '0', '0', '0', 'o', '0', '0', 'o', '0', '0', '0', 'o', '0', '0', '0', 'o', '0', '0', '0', 'c', 'o', '0', '0', 'd', '0', 'o', '0', '0', '2', '3', '4', '0', '0', '2', '3', '3', '3', '3', '4', '0', '5', '0', 'o', '0', '0', '0', 'o', '0', '0', '0', '0', '0', '0', 'o', '0', '0', '0', '0', '0', 'o', '0', '0', 'o', '0', '0', '0', 'd', '0', '0', '0', 'd', '0', '0', '0', 'c', 'o', '0', '0', 'o', '0', '0', '0', '0', 'o', '0', '0', 'o', '0', '0', '0', '0'},
                                     {'0', '0', '0', '0', '0', '2', '3', '3', '4', '0', '0', '2', '3', '3', '3', '3', '4', '0', '0', '0', '0', '5', '5', '0', '0', '0', '0', '2', '3', '3', '3', '4', '0', '0', '2', '3', '3', '3', '3', '3', '3', '3', '3', '4', '0', '0', '2', '3', '4', '0', '0', '2', '3', '4', '0', '0', '0', '0', 'c', '0', '0', '2', '3', '4', '0', '5', '0', '0', 'd', '0', '0', 'p', '0', '0', '0', 'd', '0', '0', 'd', '0', '0', '0', '2', '3', '3', '3', '3', '3', '3', '3', '3', '3', '4', '0', '0', '0', '5', '0', '0', 'o', '0', '0', '5', '5', '0', '0', '0', '5', '0', '0', '0', '0', '0', '0', 'p', '0', '0', 'c', '0', '0', '0', 'd', '0', '0', '0', 'd', '0', '0', '0', '0', '2', '3', '3', '3', '3', '3', '3', '3', '3', '3', '3', '3', '3', '4', '0', '0', '0', 'o', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0'},
                                     {'3', '3', '3', '4', '0', '0', '5', '5', '0', '0', '0', '0', '0', '5', '5', '0', '0', '0', '0', '0', '0', '5', '5', '0', '0', '0', '0', '0', '0', '5', '0', '0', '0', '0', '0', '0', '0', '0', '5', '5', '0', '0', '0', '0', '0', '0', '0', '5', '0', '0', '0', '0', '5', '0', '0', '2', '3', '3', '3', '3', '4', '0', '5', '0', '0', '5', '0', '2', '3', '3', '3', '3', '3', '3', '3', '3', '3', '3', '3', '3', '3', '4', '0', '0', '0', '0', '5', '5', '5', '0', '0', '0', '0', '0', '0', '0', '5', '0', '0', '0', '0', '0', '5', '5', '0', '0', '0', '5', '0', '0', '0', '0', '2', '3', '3', '3', '3', '3', '3', '3', '3', '3', '3', '3', '3', '3', '3', '4', '0', '0', '0', '0', '0', '0', '0', '0', '5', '5', '0', '0', '0', '0', '0', '0', '0', '0', '2', '3', '3', '3', '3', '3', '3', '3', '3', '3', '3', '3'}};

    public static char[][] level3 = {{'0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0'},
                                     {'0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0'},
                                     {'0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '6', '6', '6', '6', '6', '6', '0', '0', '6', '6', '6', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '7', '0', '0', '6', '6', '6', '6', '6', '6', '6', '6', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0'},
                                     {'0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '7', '0', '0', '0', '7', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', 'p', '0', '0', '7', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '6', '6', '6', '6', '6', '6', '6', '0', '0', '6', '6', '6', '6', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '7', '0', '0', '0', '7', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '7', '0', '0', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', 'w', '0', '0', '0'},
                                     {'0', '0', '0', 'p', '0', '0', '0', '7', '0', '0', '0', '6', '6', '6', '6', '6', '6', '6', '6', '0', '0', '0', '0', '0', '0', '0', '6', '0', '0', '6', '6', '6', '7', '7', '6', '6', '6', '6', '6', '6', '6', '6', '6', '0', '0', '0', '0', '0', '0', '0', '0', '0', '6', '6', '6', '6', '6', '6', '6', '6', '0', '0', '6', '6', '6', '6', '6', '0', '0', '0', '0', '7', '0', '0', '0', '0', '7', '0', '0', '0', '0', '7', '0', '0', '6', '6', '6', '6', '6', '6', '6', '6', '6', '0', '0', 'p', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '0', '0', '0', '0', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6'},
                                     {'6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '0', '0', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '0', '0', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '0', '0', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '0', '0', '6', '6', '6', '6', '0', '0', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6', '0', '0', '0', '0', '6', '6', '6', '6', '6', '6', '6', '6', '6', '6'}};
    
    public static int[][] winsprite = {{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                                       {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                                       {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                                       {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                                       {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
                                       {0, 0, 0, 0, 0, 6, 6, 6, 6, 6, 6, 0, 0, 0, 0, 0},
                                       {0, 0, 0, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 0, 0, 0},
                                       {0, 6, 6, 6, 1, 6, 6, 6, 6, 6, 6, 1, 6, 6, 6, 0},
                                       {0, 6, 6, 1, 6, 1, 6, 6, 6, 6, 1, 6, 1, 6, 6, 0},
                                       {6, 6, 1, 6, 6, 6, 1, 6, 6, 1, 6, 6, 6, 1, 6, 6},
                                       {6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6},
                                       {6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6}};
    
    public static int[][] heart = {{0, 3, 0, 3, 0},
                                   {3, 3, 3, 3, 3},
                                   {3, 3, 3, 3, 3},
                                   {0, 3, 3, 3, 0},
                                   {0, 0, 3, 0, 0}};

    public static int[][] flower = {{0, 0, 3, 0, 0},
                                    {0, 3, 3, 3, 0},
                                    {0, 0, 3, 0, 0},
                                    {0, 0, 5, 0, 0},
                                    {0, 5, 5, 5, 0}};

    public static int[][] cloud = {{0, 0, 0, 0, 0, 0},
                                   {0, 0, 2, 2, 0, 0},
                                   {0, 2, 2, 2, 2, 0},
                                   {0, 2, 2, 2, 2, 0},
                                   {0, 0, 2, 2, 0, 0},
                                   {0, 0, 0, 0, 0, 0}};
    
    public static int[][] button = {{0, 0, 0, 0, 0, 0},
                                    {6, 6, 6, 6, 6, 6},
                                    {6, 6, 6, 6, 6, 6},
                                    {6, 6, 6, 6, 6, 6},
                                    {2, 2, 2, 2, 2, 2},
                                    {2, 2, 2, 2, 2, 2}};
    
    public static int[][] mushroomleft = {{0, 0, 3, 3, 3, 3},
                                          {0, 3, 3, 3, 3, 3},
                                          {0, 3, 3, 3, 3, 3},
                                          {3, 3, 3, 3, 3, 3},
                                          {3, 3, 3, 3, 3, 3},
                                          {3, 3, 3, 3, 3, 3}};

    public static int[][] mushroomright = {{3, 3, 3, 3, 0, 0},
                                           {3, 3, 3, 3, 3, 0},
                                           {3, 3, 3, 3, 3, 0},
                                           {3, 3, 3, 3, 3, 3},
                                           {3, 3, 3, 3, 3, 3},
                                           {3, 3, 3, 3, 3, 3}};

    public static int[][] spike = {{0, 0, 2, 2, 0, 0},
                                   {0, 0, 2, 2, 0, 0},
                                   {0, 2, 2, 2, 2, 0},
                                   {0, 2, 2, 2, 2, 0},
                                   {2, 2, 2, 2, 2, 2},
                                   {2, 2, 2, 2, 2, 2}};

    public static int[][] playeridle = {{0, 0, 0, 0, 0, 0, 0, 0},
                                        {0, 0, 6, 6, 6, 6, 0, 0},
                                        {0, 6, 6, 1, 6, 1, 6, 0},
                                        {3, 3, 6, 1, 6, 1, 6, 3},
                                        {3, 3, 6, 6, 6, 6, 6, 3},
                                        {0, 0, 6, 6, 6, 6, 0, 0},
                                        {0, 3, 3, 0, 0, 3, 3, 0}};

    public static int[][] playershock = {{0, 0, 0, 0, 0, 0, 0, 0},
                                         {0, 0, 6, 6, 6, 6, 0, 0},
                                         {0, 6, 6, 1, 6, 1, 6, 0},
                                         {3, 3, 6, 6, 6, 6, 6, 3},
                                         {3, 3, 6, 6, 6, 6, 6, 3},
                                         {0, 0, 6, 6, 6, 6, 0, 0},
                                         {0, 3, 3, 0, 0, 3, 3, 0}};

    public static int[][] playerwalk1 = {{0, 0, 6, 6, 6, 6, 0, 0},
                                         {0, 6, 6, 1, 6, 1, 6, 0},
                                         {3, 3, 6, 1, 6, 1, 6, 3},
                                         {3, 3, 6, 6, 6, 6, 6, 3},
                                         {0, 3, 6, 6, 6, 6, 3, 0},
                                         {0, 0, 3, 0, 0, 3, 0, 0},
                                         {0, 0, 0, 0, 0, 0, 0, 0}};

    public static int[][] playerwalk2 = {{0, 0, 0, 0, 0, 0, 0, 0},
                                         {0, 0, 6, 6, 6, 6, 0, 0},
                                         {0, 6, 6, 1, 6, 1, 6, 0},
                                         {3, 3, 6, 1, 6, 1, 6, 3},
                                         {3, 3, 6, 6, 6, 6, 6, 3},
                                         {0, 0, 6, 6, 6, 6, 0, 0},
                                         {0, 0, 3, 3, 3, 0, 0, 0}};

    public static int[][] playerjump = {{0, 0, 0, 0, 0, 0, 0, 0},
                                        {0, 0, 6, 6, 6, 6, 3, 3},
                                        {3, 3, 6, 1, 6, 1, 6, 3},
                                        {3, 3, 6, 1, 6, 1, 6, 0},
                                        {0, 6, 6, 6, 6, 6, 6, 0},
                                        {0, 3, 6, 6, 6, 6, 3, 0},
                                        {0, 3, 3, 0, 0, 3, 3, 0}};

    public static int[][] playershoot = {{0, 0, 0, 0, 0, 0, 0, 0},
                                         {0, 0, 6, 6, 6, 6, 0, 0},
                                         {0, 6, 6, 6, 1, 1, 6, 3},
                                         {3, 3, 6, 6, 6, 1, 6, 3},
                                         {3, 3, 6, 6, 6, 6, 6, 0},
                                         {0, 0, 6, 6, 6, 6, 0, 0},
                                         {0, 0, 3, 3, 0, 3, 3, 0}};

    public static int[][] playerhit = {{0, 0, 0, 0, 0, 0, 0, 0},
                                       {3, 3, 6, 6, 6, 6, 3, 3},
                                       {3, 6, 1, 6, 6, 6, 1, 3},
                                       {0, 6, 6, 1, 6, 1, 6, 0},
                                       {0, 6, 1, 6, 6, 6, 1, 0},
                                       {0, 3, 6, 6, 6, 6, 3, 0},
                                       {0, 3, 3, 0, 0, 3, 3, 0}};

    public static int[][] playerwin = {{0, 0, 0, 0, 0, 0, 0, 0},
                                       {0, 0, 1, 6, 6, 6, 3, 3},
                                       {0, 6, 6, 1, 6, 1, 6, 3},
                                       {3, 3, 1, 6, 6, 1, 6, 0},
                                       {3, 3, 6, 6, 6, 6, 6, 0},
                                       {0, 0, 6, 6, 6, 6, 0, 0},
                                       {0, 3, 3, 0, 0, 3, 3, 0}};

    public static int[][] bossidle = {{0, 0, 0, 0, 0, 0, 0, 0},
                                      {0, 0, 3, 3, 3, 3, 0, 0},
                                      {0, 1, 1, 3, 1, 1, 3, 0},
                                      {0, 3, 1, 3, 1, 3, 3, 0},
                                      {6, 3, 3, 3, 3, 3, 6, 6},
                                      {6, 6, 3, 3, 3, 3, 6, 6},
                                      {0, 6, 6, 4, 6, 6, 4, 4}};

    public static int[][] bossattack = {{0, 0, 0, 0, 0, 0, 0, 0},
                                        {0, 0, 3, 3, 3, 3, 0, 0},
                                        {0, 1, 1, 3, 1, 1, 3, 0},
                                        {6, 3, 1, 3, 1, 3, 6, 6},
                                        {6, 3, 3, 3, 3, 3, 6, 6},
                                        {0, 0, 3, 3, 3, 3, 4, 4},
                                        {0, 6, 6, 4, 6, 6, 4, 4}};

    public static int[][] bossshock = {{0, 0, 0, 0, 0, 0, 0, 0},
                                       {0, 0, 3, 3, 3, 3, 0, 0},
                                       {0, 3, 3, 3, 3, 3, 3, 0},
                                       {0, 3, 1, 3, 1, 3, 3, 0},
                                       {6, 3, 3, 3, 3, 3, 6, 6},
                                       {6, 6, 3, 3, 3, 3, 6, 6},
                                       {0, 6, 6, 4, 6, 6, 4, 4}};

    public static int[][] bossdefeated = {{0, 0, 0, 0, 0, 0, 0, 0},
                                          {6, 6, 3, 3, 3, 3, 6, 6},
                                          {6, 1, 3, 3, 3, 1, 3, 6},
                                          {0, 3, 1, 3, 1, 3, 3, 0},
                                          {0, 1, 3, 3, 3, 1, 3, 0},
                                          {0, 6, 3, 3, 3, 3, 6, 4},
                                          {0, 6, 6, 4, 4, 6, 6, 4}};
    
    public static int[][] walkslime1 = {{0, 0, 5, 5, 5, 0},
                                        {0, 5, 5, 5, 5, 5},
                                        {0, 5, 1, 5, 1, 5},
                                        {5, 5, 1, 5, 1, 5},
                                        {5, 5, 5, 5, 5, 5},
                                        {5, 5, 5, 5, 5, 5}};

    public static int[][] jumpslime1 = {{0, 0, 6, 6, 6, 0},
                                        {0, 6, 6, 6, 6, 6},
                                        {0, 6, 1, 6, 1, 6},
                                        {6, 6, 1, 6, 1, 6},
                                        {6, 6, 6, 6, 6, 6},
                                        {6, 6, 6, 6, 6, 6}};

    public static int[][] jumpslime2 = {{0, 6, 6, 6, 6, 0},
                                        {6, 6, 6, 6, 6, 6},
                                        {6, 6, 1, 6, 1, 6},
                                        {6, 6, 1, 6, 1, 6},
                                        {0, 6, 6, 6, 6, 6},
                                        {0, 0, 6, 6, 6, 0}};

    public static int[][] charger1 = {{0, 5, 5, 5, 5, 0},
                                      {5, 1, 5, 1, 5, 5},
                                      {5, 1, 5, 1, 5, 5},
                                      {5, 5, 5, 5, 5, 5},
                                      {0, 5, 5, 5, 5, 0},
                                      {3, 3, 0, 3, 3, 0}};

    public static int[][] charger2 = {{0, 0, 0, 0, 0, 0},
                                      {0, 5, 5, 5, 5, 0},
                                      {1, 5, 5, 5, 1, 5},
                                      {5, 1, 5, 1, 5, 5},
                                      {0, 5, 5, 5, 5, 0},
                                      {3, 3, 0, 3, 3, 0}};

    public static int[][] charger3 = {{0, 5, 5, 5, 5, 0},
                                      {5, 1, 5, 5, 5, 5},
                                      {1, 5, 5, 5, 5, 5},
                                      {5, 5, 5, 5, 5, 5},
                                      {0, 5, 5, 5, 5, 0},
                                      {0, 0, 3, 3, 3, 3}};

    public static int[][] shooter1 = {{0, 3, 3, 3, 3, 0},
                                      {3, 1, 3, 3, 3, 3},
                                      {3, 1, 3, 3, 3, 3},
                                      {3, 3, 3, 3, 3, 3},
                                      {3, 3, 3, 3, 3, 3},
                                      {3, 3, 3, 3, 3, 3}};

    public static int[][] shooter2 = {{0, 3, 1, 3, 3, 0},
                                      {3, 1, 3, 3, 3, 3},
                                      {0, 3, 1, 3, 3, 3},
                                      {0, 0, 3, 3, 3, 3},
                                      {0, 3, 3, 3, 3, 3},
                                      {3, 3, 3, 3, 3, 3}};

    public static int[][] boom = {{4, 0, 4, 0, 4, 0},
                                  {0, 4, 4, 4, 4, 4},
                                  {4, 4, 4, 4, 4, 0},
                                  {0, 4, 4, 4, 4, 4},
                                  {4, 4, 4, 4, 4, 0},
                                  {0, 4, 0, 4, 0, 4}};

    public static int[][] A = {{0, 0, 1, 0, 0},
                               {0, 1, 0, 1, 0},
                               {0, 1, 1, 1, 0},
                               {1, 0, 0, 0, 1},
                               {1, 0, 0, 0, 1}};

    public static int[][] B = {{1, 1, 1, 1, 0},
                               {1, 0, 0, 0, 1},
                               {1, 1, 1, 1, 0},
                               {1, 0, 0, 0, 1},
                               {1, 1, 1, 1, 0}};

    public static int[][] U = {{1, 0, 0, 0, 1},
                               {1, 0, 0, 0, 1},
                               {1, 0, 0, 0, 1},
                               {1, 0, 0, 0, 1},
                               {0, 1, 1, 1, 0}};

    public static int[][] O = {{0, 1, 1, 1, 0},
                               {1, 0, 0, 0, 1},
                               {1, 0, 0, 0, 1},
                               {1, 0, 0, 0, 1},
                               {0, 1, 1, 1, 0}};

    public static int[][] P = {{1, 1, 1, 1, 0},
                               {1, 0, 0, 0, 1},
                               {1, 1, 1, 1, 0},
                               {1, 0, 0, 0, 0},
                               {1, 0, 0, 0, 0}};

    public static int[][] E = {{1, 1, 1, 1, 1},
                               {1, 0, 0, 0, 0},
                               {1, 1, 1, 1, 1},
                               {1, 0, 0, 0, 0},
                               {1, 1, 1, 1, 1}};

    public static int[][] R = {{1, 1, 1, 1, 0},
                               {1, 0, 0, 0, 1},
                               {1, 1, 1, 1, 0},
                               {1, 1, 1, 0, 0},
                               {1, 0, 0, 1, 0}};

    public static int[][] S = {{0, 1, 1, 1, 1},
                               {1, 0, 0, 0, 0},
                               {0, 1, 1, 1, 0},
                               {0, 0, 0, 0, 1},
                               {1, 1, 1, 1, 0}};

    public static int[][] T = {{1, 1, 1, 1, 1},
                               {0, 0, 1, 0, 0},
                               {0, 0, 1, 0, 0},
                               {0, 0, 1, 0, 0},
                               {0, 0, 1, 0, 0}};

    public static int[][] H = {{1, 0, 0, 0, 1},
                               {1, 0, 0, 0, 1},
                               {1, 1, 1, 1, 1},
                               {1, 0, 0, 0, 1},
                               {1, 0, 0, 0, 1}};

    public static int[][] N = {{1, 0, 0, 0, 1},
                               {1, 1, 0, 0, 1},
                               {1, 0, 1, 0, 1},
                               {1, 0, 0, 1, 1},
                               {1, 0, 0, 0, 1}};

    public static int[][] D = {{1, 1, 1, 1, 0},
                               {1, 0, 0, 0, 1},
                               {1, 0, 0, 0, 1},
                               {1, 0, 0, 0, 1},
                               {1, 1, 1, 1, 0}};
    
    public Main(){
        this.setTitle("Baubo");
        this.setSize(100, 100);
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        this.addKeyListener(this);
        this.setVisible(true);
        gameLoop();
    }

    static void gameLoop(){
        createLevel(level1);
        while (1==1){
            System.out.print("\033[H\033[2J");
            System.out.flush();

            for (int i = 0; i < pixels.length; i++){
                if (level < 3){
                    pixels[i] = lightblue;
                }
                else{
                    pixels[i] = black;
                }
            }

            if (gameState == "title"){
                drawSprite(B, 5, -10, false);
                drawSprite(A, 11, -10, false);
                drawSprite(U, 17, -10, false);
                drawSprite(B, 23, -10, false);
                drawSprite(O, 29, -10, false);

                drawSprite(P, 5, -20, false);
                drawSprite(R, 11, -20, false);
                drawSprite(E, 17, -20, false);
                drawSprite(S, 23, -20, false);
                drawSprite(S, 29, -20, false);

                drawSprite(U, 15, -26, false);
                drawSprite(P, 21, -26, false);
                
                if (upKey){
                    introtimer = 1;
                }
                if (introtimer > 0){
                    introtimer++;
                }

                transition(introtimer, 0);
                if (introtimer == 22){
                    gameState = "cutscene";
                    introtimer = 0;
                }
            }
            else if (gameState == "cutscene"){
                rect(0, -29, 42, 6, green);
                drawSprite(cloud, 2, -12, false);
                drawSprite(cloud, 11, -19, false);
                drawSprite(cloud, 15, -7, false);
                drawSprite(cloud, 23, -16, false);
                drawSprite(cloud, 29, -9, false);
                drawSprite(cloud, 37, -14, false);
                introtimer++;
                if (introtimer < 20){
                    drawSprite(playeridle, playerx, playery, false);
                }
                else if (introtimer > 20 && introtimer < 35){
                    drawSprite(bossidle, bossx, bossy, false);
                    bossx += 7;
                    if (introtimer >= 22){
                        drawSprite(playershock, playerx, playery, false);
                    }
                }
                else if (introtimer > 35 && introtimer < 45){
                    drawSprite(playeridle, playerx, playery, false);
                }
                else if (introtimer > 45 && introtimer < 51){
                    drawSprite(playerwalk1, playerx, playery, false);
                    playerx += 5;
                }
                transition(introtimer, 60);
                if (introtimer == 80){
                    gameState = "game";
                }
            }
            else if (gameState == "game"){
                /*
                update in game loop
                */

                //player
                if (playerhp > 0 && playerwintimer == 0){
                    if (!(level == 3 && bossdeathtimer > 0)){
                        if (rightKey){
                            playerdir = 1;
                            playerxv += 0.25;
                            if (playerxv > 2.5){
                                playerxv = 3;
                            }
                        }
                        else if (playerxv > 0){
                            playerxv -= 0.25;
                            if (playerxv < 0){
                                playerxv = 0;
                            }
                        }
                        
                        if (leftKey){
                            playerdir = -1;
                            playerxv -= 0.25;
                            if (playerxv < -2.5){
                                playerxv = -3;
                            }
                        }
                        else if (playerxv < 0){
                            playerxv += 0.25;
                            if (playerxv > 0){
                                playerxv = 0;
                            }
                        }
                        
                        playerx += playerxv;
                        if (playerx < 0){
                            playerx = 0;
                            playerxv = 0;
                        }
                        if (playerx > 14){
                            playerx = 14;
                            camx += playerxv;
                        }
    
                        if (playerxv != 0){
                            playerwalktimer++;
                        }
        
                        for (int i = 0; i < Tiles.list.size(); i++){
                            if (collide(Tiles.list.get(i).x - camx, Tiles.list.get(i).x + 6 - camx, Tiles.list.get(i).y, Tiles.list.get(i).y + 6, playerx, playerx + 7, playery, playery + 6) && (Tiles.list.get(i).type != "spike" && Tiles.list.get(i).type != "cloud")){
                                if (playerxv > 0){
                                    playerx = Tiles.list.get(i).x - camx - 7;
                                }
                                else if (playerxv < 0){
                                    playerx = Tiles.list.get(i).x - camx + 6;
                                }
                                playerxv = 0;
                            }
                        }
        
                        if (upKey){
                            playeryv -= 0.5;
                        }
                        else{
                            playeryv -= 0.8;
                        }
                        playery += playeryv;
                        playerfalling++;
        
                        for (int i = 0; i < Tiles.list.size(); i++){
                            if (collide(Tiles.list.get(i).x - camx, Tiles.list.get(i).x + 6 - camx, Tiles.list.get(i).y, Tiles.list.get(i).y + 6, playerx, playerx + 7, playery, playery + 6) && (Tiles.list.get(i).type != "spike" && Tiles.list.get(i).type != "cloud")){
                                if (playeryv > 0){
                                    playery = Tiles.list.get(i).y - 6;
                                }
                                else if (playeryv < 0){
                                    playery = Tiles.list.get(i).y + 6;
                                    playerfalling = 0;
                                }
                                playeryv = 0;
                            }
                        }
        
                        if (upKey && playerfalling == 0){
                            playeryv = 3;
                        }
        
                        if (playeriframes > 0){
                            playeriframes--;
                        }
        
                        if (spaceKey && fireballactive == false && playerhp == 3){
                            fireballx = playerx;
                            firebally = playery + 2;
                            if (playerdir == 1){
                                fireballxv = 1.5f;
                            }
                            else{
                                fireballxv = -1.5f;
                            }
                            fireballactive = true;
                            fireballtimer = 5;
                        }
                        if (fireballtimer > 0){
                            fireballtimer--;
                        }
                        if (playerwalktimer == 10){
                            playerwalktimer = 0;
                        }
                    }

                }
                else{
                    if (playerhp < 1){
                        playerdeathtimer++;
                        if (playerdeathtimer == 10){
                            playeryv = 5;
                        }
                        if (playerdeathtimer > 10){
                            playeryv -= 0.8;
                            playery += playeryv;
                        }
                        if (playerdeathtimer == 40){
                            for (int i = Enemy.list.size()-1; i >= 0; i--){
                                Enemy.list.remove(i);
                            }
                            for (int i = Tiles.list.size()-1; i >= 0; i--){
                                Tiles.list.remove(i);
                            }
                            for (int i = Items.list.size()-1; i >= 0; i--){
                                Items.list.remove(i);
                            }
                            if (level == 3){
                                bossx = 34;
                                bossy = -26;
                                bosstimer = 0;
                            }
    
                            switch (level){
                                    case 1: createLevel(level1);
                                    break;
                                    case 2: createLevel(level2);
                                    break;
                                    case 3: createLevel(level3);
                                    break;
                            }
    
                            playerx = 0;
                            camx = 0;
                            playery = -23;
                            playeryv = 0;
                            playerxv = 0;
                            playerhp = 1;
                            playerdeathtimer = 0;
                            playeriframes = 0;
                        }
                    }
                }

                if (playery < -30){
                    playerhp = 0;
                }

                //spikes
                for (int i = 0; i < Tiles.list.size(); i++){
                    if (collide(Tiles.list.get(i).x - camx, Tiles.list.get(i).x + 6 - camx, Tiles.list.get(i).y, Tiles.list.get(i).y + 3, playerx, playerx + 7, playery, playery + 6) && Tiles.list.get(i).type == "spike"){
                        if (playeriframes == 0){
                            playerhp--;
                            playeriframes = 40;
                        }
                    }
                }

                //fireball
                if (fireballactive){
                    fireballx += fireballxv;
                    if (fireballx > width-1 || fireballx + 2 < 0){
                        fireballactive = false;
                    }
                }

                //update enemies
                for (int i = 0; i < Enemy.list.size(); i++){
                    if (Enemy.list.get(i).deathtimer == 0){
                        if (Enemy.list.get(i).type == "walk slime"){
                            Enemy.list.get(i).timer = 0;
                            for (int j = 0; j < Tiles.list.size(); j++){
                                if (Enemy.list.get(i).x + 5 >= Tiles.list.get(j).x && Enemy.list.get(i).x <= Tiles.list.get(j).x + 6 && Enemy.list.get(i).y + 5 >= Tiles.list.get(j).y && Enemy.list.get(i).y <= Tiles.list.get(j).y + 6){
                                    Enemy.list.get(i).xv *= -1;
                                }
                            }
                            for (int j = 0; j < Tiles.list.size(); j++){
                                //detecting touching edges
                                if (Enemy.list.get(i).xv > 0){
                                    if (Enemy.list.get(i).x + 6 >= Tiles.list.get(j).x && Enemy.list.get(i).x + 6 <= Tiles.list.get(j).x + 5 && Enemy.list.get(i).y - 1 >= Tiles.list.get(j).y && Enemy.list.get(i).y - 1 <= Tiles.list.get(j).y + 5){
                                        Enemy.list.get(i).timer = 1;
                                        break;
                                    }
                                }
                                else{
                                    if (Enemy.list.get(i).x - 1 >= Tiles.list.get(j).x && Enemy.list.get(i).x - 1 <= Tiles.list.get(j).x + 5 && Enemy.list.get(i).y - 1 >= Tiles.list.get(j).y && Enemy.list.get(i).y - 1 <= Tiles.list.get(j).y + 5){
                                        Enemy.list.get(i).timer = 1;
                                        break;
                                    }
                                }
                            }
                            if (Enemy.list.get(i).timer == 0){
                                Enemy.list.get(i).xv *= -1;
                            }
                            Enemy.list.get(i).x += Enemy.list.get(i).xv;
                        }
                        else if (Enemy.list.get(i).type == "jump slime"){
                            Enemy.list.get(i).jumpSlimeTick();
                        }
                        else if (Enemy.list.get(i).type == "shooter"){
                            Enemy.list.get(i).shooterTick(camx);
                        }
                        else if (Enemy.list.get(i).type == "projectile"){
                            Enemy.list.get(i).x += Enemy.list.get(i).xv; //didn't feel like making this its own method
                        }
                        else if (Enemy.list.get(i).type == "charger"){
                            Enemy.list.get(i).chargerTick(playerx, camx);
                        }
                    }

                    if (Enemy.list.get(i).type != "projectile"){
                        //touch player
                        if (Enemy.list.get(i).deathtimer == 0){
                            if (Enemy.list.get(i).x + 5 - camx >= playerx && Enemy.list.get(i).x - camx <= playerx + 7 && Enemy.list.get(i).y + 5 >= playery && Enemy.list.get(i).y <= playery + 6){
                                if (playeryv < 0 && playerhp > 0){
                                    Enemy.list.get(i).deathtimer = 1;
                                    playeryv = 3;
                                }
                                else{
                                    if (playeriframes == 0){
                                        playerhp--;
                                        playeriframes = 40;
                                    }
                                }
                            }
                            //touch fireball
                            if (Enemy.list.get(i).x + 5 - camx >= fireballx && Enemy.list.get(i).x - camx <= fireballx + 2 && Enemy.list.get(i).y + 5 >= firebally && Enemy.list.get(i).y <= firebally + 2){
                                if (fireballactive){
                                    Enemy.list.get(i).deathtimer = 1;
                                    fireballactive = false;
                                }
                            }
                        }
                        else{
                            Enemy.list.get(i).deathtimer++;
                            if (Enemy.list.get(i).deathtimer == 6){
                                Enemy.list.get(i).alive = false;
                            }
                        }
                    }
                    else{
                        if (Enemy.list.get(i).x + 2 - camx >= playerx && Enemy.list.get(i).x - camx <= playerx + 7 && Enemy.list.get(i).y + 2 >= playery && Enemy.list.get(i).y <= playery + 6){
                            if (playeriframes == 0){
                                playerhp--;
                                playeriframes = 40;
                            }
                        }
                    }
                }

                //delete enemies
                for (int i = Enemy.list.size() - 1; i >= 0; i--){
                    if (Enemy.list.get(i).alive == false || Enemy.list.get(i).x + 5 - camx < 0){
                        Enemy.list.remove(i);
                    }
                }

                //items
                for (int i = 0; i < Items.list.size(); i++){
                    if (collide(Items.list.get(i).x - camx, Items.list.get(i).x + 4 - camx, Items.list.get(i).y, Items.list.get(i).y + 4, playerx, playerx + 7, playery, playery + 6)){
                        if (playerhp < 3){
                            playerhp++;
                        }
                        Items.list.get(i).alive = false;
                    }
                }

                //delete items
                for (int i = Items.list.size() - 1; i >= 0; i--){
                    if (Items.list.get(i).alive == false || Items.list.get(i).x + 5 - camx < 0){
                        Items.list.remove(i);
                    }
                }

                //levels ending
                if (level == 1 && playerwintimer == 0){
                    if (camx > 982){
                        playerwintimer = 1;
                    }
                }
                if (level == 2 && playerwintimer == 0){
                    if (camx > 900){
                        playerwintimer = 1;
                    }
                }

                if (playerwintimer > 0){
                    playerwintimer++;
                    if (playerwintimer == 30){
                        if (level < 3){
                            level++;
                            for (int i = Enemy.list.size()-1; i >= 0; i--){
                                Enemy.list.remove(i);
                            }
                            for (int i = Tiles.list.size()-1; i >= 0; i--){
                                Tiles.list.remove(i);
                            }
                            for (int i = Items.list.size()-1; i >= 0; i--){
                                Items.list.remove(i);
                            }
    
                            switch (level){
                                    case 2: createLevel(level2);
                                    break;
                                    case 3: createLevel(level3); bossx = 34; bossy = -26;
                                    break;
                            }
    
                            playerx = 0;
                            camx = 0;
                            playery = -23;
                            playeryv = 0;
                            playerxv = 0;
                            playerwintimer = 0;
                            playeriframes = 0;
                        }
                        else{
                            gameState = "win";
                        }
                    }
                }

                //boss
                if (level == 3){
                    if (bossdeathtimer == 0){
                        bosstimer++;
                        if (bosstimer == 10){
                            bossyv = 9;
                        }
                        if (bosstimer > 10 && bosstimer < 14){
                            bossyv -= 2;
                            bossy += bossyv;
                        }
                        if (bosstimer == 14){
                            bossy = -8;
                        }
                        if (bosstimer == 20){
                            Enemy.list.add(new Enemy(bossx + camx, bossy + 2, -2, 0, "projectile"));
                        }
    
                        if (bosstimer == 35){
                            bossyv = -9;
                        }
                        if (bosstimer > 35 && bosstimer < 39){
                            bossyv += 2;
                            bossy += bossyv;
                        }
                        if (bosstimer == 39){
                            bossy = -26;
                        }
                        if (bosstimer == 45){
                            Enemy.list.add(new Enemy(bossx + camx, bossy + 2, -2, 0, "projectile"));
                        }
    
                        if (bosstimer == 55){
                            bosstimer = 0;
                        }
                    }
                    else{
                        bossdeathtimer++;
                        if (bossdeathtimer == 22){
                            bossyv = 4  ;
                        }
                        if (bossdeathtimer > 22){
                            bossyv -= 1;
                            bossy += bossyv;
                            if (bossy < -45){
                                bossy = -45;
                            }
                            if (bossdeathtimer == 45){
                                playerwintimer = 1;
                            }
                        }
                    }
                }

                //button
                if (level == 3){
                    if (collide(buttonx - camx, buttonx + 7 - camx, buttony, buttony + 5, playerx, playerx + 7, playery, playery + 6) && playerfalling == 0){
                        if (bossdeathtimer == 0){
                            bossdeathtimer = 1;
                        }
                        if (Enemy.list.size() == 1){
                            Enemy.list.remove(0);
                        }
                    }
                }

                /*
                render
                */
                
                //tiles
                for (int i = 0; i < Tiles.list.size(); i++){
                    if ((Tiles.list.get(i).x+6) - camx >= 0 && Tiles.list.get(i).x - camx <= (width-1)){
                        if (Tiles.list.get(i).type == "ground"){
                            rect(Tiles.list.get(i).x - camx, Tiles.list.get(i).y, 6, 6, green);
                        }
                        else if (Tiles.list.get(i).type == "mushroom left corner"){
                            drawSprite(mushroomleft, Tiles.list.get(i).x - camx, Tiles.list.get(i).y, false);
                        }
                        else if (Tiles.list.get(i).type == "mushroom middle"){
                            rect(Tiles.list.get(i).x - camx, Tiles.list.get(i).y, 6, 6, red);
                        }
                        else if (Tiles.list.get(i).type == "mushroom right corner"){
                            drawSprite(mushroomright, Tiles.list.get(i).x - camx, Tiles.list.get(i).y, false);
                        }
                        else if (Tiles.list.get(i).type == "mushroom stem"){
                            rect(Tiles.list.get(i).x - camx, Tiles.list.get(i).y, 6, 6, yellow);
                        }
                        else if (Tiles.list.get(i).type == "stone"){
                            rect(Tiles.list.get(i).x - camx, Tiles.list.get(i).y, 6, 6, grey);
                        }
                        else if (Tiles.list.get(i).type == "spike"){
                            drawSprite(spike, Tiles.list.get(i).x - camx, Tiles.list.get(i).y, false);
                        }
                        else if (Tiles.list.get(i).type == "cloud"){
                            drawSprite(cloud, Tiles.list.get(i).x - camx, Tiles.list.get(i).y, false);
                        }
                    }
                }
                
                //fireball
                if (fireballactive){
                    rect(fireballx, firebally, 3, 3, red);
                }
                
                //player
                if (playerwintimer == 0){
                    if (playerhp > 0){
                        if (playeriframes > 30){
                            drawSprite(playerhit, playerx, playery, playerdir == -1);
                        }
                        else{
                            if (fireballtimer > 0){
                                drawSprite(playershoot, playerx, playery, playerdir == -1);
                            }
                            else{
                                if (playerfalling > 0){
                                    drawSprite(playerjump, playerx, playery, playerdir == -1);
                                }
                                else{
                                    if (playerxv != 0){
                                        if (playerwalktimer <= 4){
                                            drawSprite(playerwalk1, playerx, playery, playerdir == -1);
                                        }
                                        else{
                                            drawSprite(playerwalk2, playerx, playery, playerdir == -1);
                                        }
                                    }
                                    else{
                                        drawSprite(playeridle, playerx, playery, playerdir == -1);
                                    }
                                }
                            }
                        }
                    }
                    else{
                        drawSprite(playerhit, playerx, playery, playerdir == -1);
                    }
                }
                else{
                    drawSprite(playerwin, playerx, playery, playerdir == -1);
                }

                //enemies
                for (int i = 0; i < Enemy.list.size(); i++){
                    if (Enemy.list.get(i).type != "projectile"){
                        if (Enemy.list.get(i).deathtimer == 0){
                            if (Enemy.list.get(i).type == "walk slime"){
                                drawSprite(walkslime1, Enemy.list.get(i).x - camx, Enemy.list.get(i).y, Enemy.list.get(i).xv < 0);
                            }
                            else if (Enemy.list.get(i).type == "jump slime"){
                                if (Enemy.list.get(i).timer <= 20){
                                    drawSprite(jumpslime1, Enemy.list.get(i).x - camx, Enemy.list.get(i).y, true);
                                }
                                else{
                                    drawSprite(jumpslime2, Enemy.list.get(i).x - camx, Enemy.list.get(i).y, true);
                                }
                            }
                            else if (Enemy.list.get(i).type == "charger"){
                                if (Enemy.list.get(i).timer == 0){
                                    drawSprite(charger1, Enemy.list.get(i).x - camx, Enemy.list.get(i).y, false);
                                }
                                else if (Enemy.list.get(i).timer <= 5){
                                    drawSprite(charger2, Enemy.list.get(i).x - camx, Enemy.list.get(i).y, false);
                                }
                                else{
                                    drawSprite(charger3, Enemy.list.get(i).x - camx, Enemy.list.get(i).y, false);
                                }
                            }
                            else if (Enemy.list.get(i).type == "shooter"){
                                if (Enemy.list.get(i).timer < 14){
                                    drawSprite(shooter1, Enemy.list.get(i).x - camx, Enemy.list.get(i).y, false);
                                }
                                else{
                                    drawSprite(shooter2, Enemy.list.get(i).x - camx, Enemy.list.get(i).y, false);
                                }
                            }
                        }
                        else{
                            drawSprite(boom, Enemy.list.get(i).x - camx, Enemy.list.get(i).y, true);
                        }
                    }
                    else if (Enemy.list.get(i).type == "projectile"){
                        rect(Enemy.list.get(i).x - camx, Enemy.list.get(i).y, 3, 3, yellow);
                    }
                }

                //items
                for (int i = 0; i < Items.list.size(); i++){
                    if ((Items.list.get(i).x+6) - camx >= 0 && Items.list.get(i).x - camx <= (width-1)){
                        if (playerhp < 2){
                            drawSprite(heart, Items.list.get(i).x - camx, Items.list.get(i).y, false);
                        }
                        else if (playerhp >= 2){
                            drawSprite(flower, Items.list.get(i).x - camx, Items.list.get(i).y, false);
                        }
                    }
                }

                //boss
                if (level == 3){
                    if (bossdeathtimer == 0){
                        if ((bosstimer >= 14 && bosstimer < 23) || (bosstimer >= 39 && bosstimer < 48)){
                            drawSprite(bossattack, bossx, bossy, false);
                        }
                        else{
                            drawSprite(bossidle, bossx, bossy, false);
                        }
                    }
                    else{
                        if (bossdeathtimer < 22){
                            drawSprite(bossshock, bossx, bossy, false);
                        }
                        else{
                            if (bossy >= -35 && bossy + 6 <= 0){
                                drawSprite(bossdefeated, bossx, bossy, false);
                            }
                        }
                    }
                }

                //animated projectile at end
                if (bossdeathtimer == 15){
                    projx = 2;
                    projy = bossy + 2;
                }
                if (bossdeathtimer > 15 && bossdeathtimer < 22){
                    projx += 5;
                }

                if (bossdeathtimer >= 15 && bossdeathtimer <= 21){
                    rect(projx, projy, 3, 3, yellow);
                }

                //button
                if (buttonx - camx >= 0 && buttonx + 7 - camx <= 41){
                    if (bossdeathtimer == 0){
                        drawSprite(button, buttonx - camx, buttony, false);
                    }
                }

                //player health
                rect(3, -3, 6, 2, black);
                rect(3, -3, playerhp*2, 2, red);

                //transitions
                if (playerhp == 0){
                    transition(playerdeathtimer, 20);
                }
                transition(playerwintimer, 10);
            }
            else if (gameState == "win"){
                for (int i = 0; i < pixels.length; i++){
                    pixels[i] = lightblue;
                }
                
                drawSprite(T, 1, -7, false);
                drawSprite(H, 7, -7, false);
                drawSprite(E, 13, -7, false);

                drawSprite(E, 22, -7, false);
                drawSprite(N, 28, -7, false);
                drawSprite(D, 34, -7, false);

                drawSprite(winsprite, 12, -30, false);
            }

            for (int i = 0; i < height; i++){
                for (int j = 0; j < width; j++){
                    System.out.print(pixels[i * width + j]);
                }
                System.out.println("\u001B[0m");
            }

            try{
                Thread.sleep(50);
            } catch (InterruptedException e){
                e.printStackTrace();
            }
        }
    }

    public static void main(String[] args){
        new Main();
    }

    static void setPixel(float x, float y, String color){
        if (x >= 0 && x <= (width-1) && y <= 0 && y >= -(height-1)){
            pixels[Math.abs(Math.round(y)) * width + Math.round(x)] = color;
        }
    }

    static void rect(float x, float y, int width, int height, String color){
        for (float i = x; i < x + width; i++){
            for (float j = y; j < y + height; j++){
                setPixel(i, j, color);
            }
        }
    }

    static void drawSprite(int[][] sprite, float x, float y, boolean hflip){
        for (float i = y; i < y + sprite.length; i++){
            for (float j = x; j < x + sprite[0].length; j++){
                if (!hflip){
                    switch (sprite[Math.round(Math.abs(i-(y+(sprite.length-1))))][Math.round(j-x)]){
                            case 1: setPixel(j, i, black);
                            break;
                            case 2: setPixel(j, i, white);
                            break;
                            case 3: setPixel(j, i, red);
                            break;
                            case 4: setPixel(j, i, yellow);
                            break;
                            case 5: setPixel(j, i, green);
                            break;
                            case 6: setPixel(j, i, blue);
                            break;
                    }
                }
                else{
                    switch (sprite[Math.round(Math.abs(i-(y+(sprite.length-1))))][Math.round(Math.abs(j-(x+(sprite[0].length-1))))]){
                            case 1: setPixel(j, i, black);
                            break;
                            case 2: setPixel(j, i, white);
                            break;
                            case 3: setPixel(j, i, red);
                            break;
                            case 4: setPixel(j, i, yellow);
                            break;
                            case 5: setPixel(j, i, green);
                            break;
                            case 6: setPixel(j, i, blue);
                            break;
                    }
                }
            }
        }
    }

    static void transition(int timer, int time){
        if (timer >= time){
            rect(0, -35, 42, (timer - time) * 2, black);
        }
    }

    static boolean collide(float minx1, float maxx1, float miny1, float maxy1, float minx2, float maxx2, float miny2, float maxy2){
        return minx1 < maxx2 && maxx1 > minx2 && miny1 < maxy2 && maxy1 > miny2;
    }

    static void createLevel(char[][] level){
        for (int i = 0; i < level.length; i++){
            for (int j = 0; j < level[0].length; j++){
                switch (level[i][j]){
                        case '1': Tiles.list.add(new Tiles(j*6, (i*-6)+1, 0, 0, "ground"));
                        break;
                        case '2': Tiles.list.add(new Tiles(j*6, (i*-6)+1, 0, 0, "mushroom left corner"));
                        break;
                        case '3': Tiles.list.add(new Tiles(j*6, (i*-6)+1, 0, 0, "mushroom middle"));
                        break;
                        case '4': Tiles.list.add(new Tiles(j*6, (i*-6)+1, 0, 0, "mushroom right corner"));
                        break;
                        case '5': Tiles.list.add(new Tiles(j*6, (i*-6)+1, 0, 0, "mushroom stem"));
                        break;
                        case '6': Tiles.list.add(new Tiles(j*6, (i*-6)+1, 0, 0, "stone"));
                        break;
                        case '7': Tiles.list.add(new Tiles(j*6, (i*-6)+1, 0, 0, "spike"));
                        break;
                        case 'o': Tiles.list.add(new Tiles(j*6, (i*-6)+1, 0, 0, "cloud"));
                        break;
                        case 'a': Enemy.list.add(new Enemy(j*6, (i*-6)+1, 1, 0, "walk slime"));
                        break;
                        case 'b': Enemy.list.add(new Enemy(j*6, (i*-6)+1, 0, 0, "jump slime"));
                        break;
                        case 'c': Enemy.list.add(new Enemy(j*6, (i*-6)+1, 0, 0, "charger"));
                        break;
                        case 'd': Enemy.list.add(new Enemy(j*6, (i*-6)+1, 0, 0, "shooter"));
                        break;
                        case 'p': Items.list.add(new Items(j*6, (i*-6)+1));
                        break;
                        case 'w': buttonx = j*6; buttony = (i*-6)+1;
                        break;
                }
            }
        }
    }

    public void keyTyped(KeyEvent e){
        
    }
    public void keyPressed(KeyEvent e){
        switch (e.getKeyCode()){
                case 37: leftKey = true;
                break;
                case 38: upKey = true;
                break;
                case 39: rightKey = true;
                break;
                case 40: downKey = true;
                break;
                case 32: spaceKey = true;
                break;
        }
    }
    public void keyReleased(KeyEvent e){
        switch (e.getKeyCode()){
                case 37: leftKey = false;
                break;
                case 38: upKey = false;
                break;
                case 39: rightKey = false;
                break;
                case 40: downKey = false;
                break;
                case 32: spaceKey = false;
                break;
        }
    }
}